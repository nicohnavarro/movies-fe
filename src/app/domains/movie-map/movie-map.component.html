<div class="map-layout">
  <div class="sidebar">
    <mat-form-field appearance="outline" class="full-width">
      <input
        matInput
        placeholder="Buscar película (mín. 3 caracteres)"
        [formControl]="searchControl"
        autocomplete="off" />
    </mat-form-field>

    <div *ngFor="let movie of filteredMovies()" class="movie-card" (click)="selectMovie(movie)">
      <h3>{{ movie.title }}</h3>
      <p>{{ movie.location }}</p>
      <small>{{ movie.releaseYear }} · {{ movie.neighborhood }}</small>
    </div>
  </div>

  <google-map
    class="map"
    [center]="mapCenter"
    [zoom]="zoom"
    [options]="mapOptions">

    <map-marker
      *ngFor="let movie of filteredMovies()"
      [position]="{ lat: movie.lat, lng: movie.lng }"
      [icon]="getCustomMarkerIcon(movie)"
      (mapClick)="openInfo(movie)">
    </map-marker>

    <map-info-window #infoWindow>
      <ng-container *ngIf="selectedMovie">
        <strong>{{ selectedMovie.title }}</strong><br />
        <span>{{ selectedMovie.location }}</span><br />
        <small>{{ selectedMovie.releaseYear }} · {{ selectedMovie.neighborhood }}</small>
      </ng-container>
    </map-info-window>
  </google-map>
</div>
